(this.webpackJsonpmoviedb=this.webpackJsonpmoviedb||[]).push([[0],{23:function(e,t,a){e.exports=a(43)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),l=(a(31),a(8)),i=a(1),s=a(10),m=a(3),u=a(46),p=a(45),f=(a(32),a(33),a(34),a(35),a(36),a(37),a(2)),v=a.n(f),d=a(6),g=function(e){var t=e.movie,a=e.onToggleFavorite,n=e.isFavorite,c=(e.query,e.page,e.onClick);return r.a.createElement("div",{className:"single-card"},r.a.createElement(s.b,{to:"/".concat(t.id),style:{textDecoration:"none",color:"inherit"},onClick:c},r.a.createElement("div",{className:"movie-card"},r.a.createElement("div",{className:"movie-details"},r.a.createElement("img",{className:"card-img",src:"".concat("http://image.tmdb.org/t/p/w780").concat(t.backdrop_path),alt:t.title}),r.a.createElement("h2",{className:"title"},t.title),r.a.createElement("p",{className:"description"},t.overview.length>100?t.overview.substring(0,100)+"...":t.overview),r.a.createElement("div",{className:"flex card-icons"},r.a.createElement("p",{className:"read-more"},"Read More"),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"favorite-heart ".concat(n?"active":""),onClick:function(e){e.preventDefault(),a(t)},width:"30px",height:"30px"},r.a.createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",fill:n?"red":"none",stroke:n?"red":"black",strokeWidth:"1"})))))))},h=a(21),E=a.n(h),b=function(e){e.favorites;var t=e.onToggleFavorite,a=e.isFavorite,c=Object(n.useState)([]),o=Object(i.a)(c,2),s=o[0],m=o[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),f=p[0],h=p[1],b=Object(n.useState)(!1),w=Object(i.a)(b,2),N=w[0],j=w[1],k=Object(n.useState)(""),x=Object(i.a)(k,2),O=x[0],y=x[1],S=Object(n.useState)(1),_=Object(i.a)(S,2),C=_[0],F=_[1],I=Object(n.useState)(0),T=Object(i.a)(I,2),M=T[0],U=T[1],B="https://api.themoviedb.org/3/search/movie?api_key=".concat("a62fd138fc3adf6aa51790c63f1f498e","&language=en-US&query="),D=function(){var e=Object(d.a)(v.a.mark((function e(){var t,a,n,r,c,o=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:1,a=o.length>1&&void 0!==o[1]&&o[1],f){e.next=4;break}return e.abrupt("return");case 4:return j(!0),y(""),e.prev=6,e.next=9,fetch("".concat(B).concat(encodeURIComponent(f),"&page=").concat(t));case 9:if((n=e.sent).ok){e.next=12;break}throw new Error("Network response was not ok");case 12:return e.next=14,n.json();case 14:r=e.sent,c=r.results.filter((function(e){return e.backdrop_path&&e.poster_path})),a?(c=c.slice(0,6),m(c),localStorage.setItem("movies",JSON.stringify(c))):(m((function(e){return[].concat(Object(l.a)(e),Object(l.a)(c))})),localStorage.setItem("movies",JSON.stringify([].concat(Object(l.a)(s),Object(l.a)(c))))),U(r.total_results),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(6),y("Error fetching movies. Please try again."),console.error("Error fetching movies:",e.t0);case 24:return e.prev=24,j(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[6,20,24,27]])})));return function(){return e.apply(this,arguments)}}(),L=Object(n.useCallback)(E()((function(e,t,a){return D(t,a)}),500),[]);Object(n.useEffect)((function(){var e=localStorage.getItem("query")||"",t=parseInt(localStorage.getItem("page"))||1,a=JSON.parse(localStorage.getItem("movies"))||[];h(e),F(t),m(a),e?L(e,t,!0):m([])}),[L]),Object(n.useEffect)((function(){f&&localStorage.setItem("query",f),C&&localStorage.setItem("page",C)}),[f,C]);var q=function(){F(1),localStorage.setItem("page",1),D(1,!0)},A=Math.ceil(M/20),W=s.length>0&&C<A;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-contain"},r.a.createElement("input",{className:"search-bar",type:"text",value:f,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&q()},placeholder:"Search for movies"}),r.a.createElement("button",{className:"button",onClick:q},"Search")),N&&r.a.createElement("p",{className:"loading"},"Loading..."),O&&r.a.createElement("p",{className:"loading"},O),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flex flex-wrap"},s.length>0?s.map((function(e){return r.a.createElement(g,{query:f,page:C,key:e.id,movie:e,onToggleFavorite:t,isFavorite:a(e)})})):!N&&!O&&r.a.createElement("p",{className:"no-movies-found"},"Try searching a movie title.")),W&&r.a.createElement("div",{className:"show-more-parent flex justify-content-center"},r.a.createElement("button",{className:"show-more-button button",onClick:function(){var e=C+1;F(e),localStorage.setItem("page",e),D(e)}},"Show More"))))},w=a(22),N=a.n(w),j=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},k="a62fd138fc3adf6aa51790c63f1f498e",x="https://api.themoviedb.org/3",O=function(){var e=Object(d.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/movie/").concat(t,"?api_key=").concat(k,"&language=en-US"));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/movie/").concat(t,"/images?api_key=").concat(k));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/movie/").concat(t,"/credits?api_key=").concat(k));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/movie/").concat(t,"/videos?api_key=").concat(k));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/movie/").concat(t,"/similar?api_key=").concat(k,"&language=en-US"));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/movie/").concat(t,"/watch/providers?api_key=").concat(k));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.match,a=Object(m.f)(),c=new URLSearchParams(a.search),o=c.get("query"),l=c.get("page"),u=Object(n.useState)({}),p=Object(i.a)(u,2),f=p[0],g=p[1],h=Object(n.useState)([]),E=Object(i.a)(h,2),b=E[0],w=E[1],k=Object(n.useState)(null),x=Object(i.a)(k,2),I=x[0],T=x[1],M=Object(n.useState)(""),U=Object(i.a)(M,2),B=U[0],D=U[1],L=Object(n.useState)([]),q=Object(i.a)(L,2),A=q[0],W=q[1],J=Object(n.useState)([]),R=Object(i.a)(J,2),P=R[0],Y=R[1],z=Object(n.useState)(null),G=Object(i.a)(z,2),H=G[0],K=G[1],V=Object(n.useState)(!1),$=Object(i.a)(V,2),Q=$[0],X=$[1],Z=Object(n.useState)(!1),ee=Object(i.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)([]),re=Object(i.a)(ne,2),ce=re[0],oe=re[1];Object(n.useEffect)((function(){o&&localStorage.setItem("query",o),l&&localStorage.setItem("page",l),function(){var e=Object(d.a)(v.a.mark((function e(){var a,n,r,c,o,l,i,s,m,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t.params.id);case 2:return a=e.sent,g(a),e.next=6,y(t.params.id);case 6:return n=e.sent,w(n.backdrops.slice(0,8)),e.next=10,S(t.params.id);case 10:return r=e.sent,c=r.crew.find((function(e){return"Director"===e.job})),D(c?c.name:"N/A"),o=r.cast.filter((function(e){return e.profile_path})),W(o.slice(0,5)),e.next=17,_(t.params.id);case 17:return l=e.sent,i=l.results.find((function(e){return"Trailer"===e.type&&"YouTube"===e.site})),T(i?i.key:null),e.next=22,C(t.params.id);case 22:return s=e.sent,m=s.results.filter((function(e){return e.backdrop_path})),Y(m.slice(0,3)),e.next=27,F(t.params.id);case 27:(u=e.sent).results.US&&u.results.US.flatrate&&oe(u.results.US.flatrate);case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t.params.id]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[f.id]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"movie-wrapper",style:{backgroundImage:"url(".concat("http://image.tmdb.org/t/p/w1280").concat(f.backdrop_path,")")}}),r.a.createElement("div",{className:"container relative"},r.a.createElement("h1",{className:"movie-title text-center"},f.title),r.a.createElement("em",{className:"block text-center"},f.tagline),r.a.createElement("div",{className:"movie-info"},r.a.createElement(N.a,{id:f.id},r.a.createElement("img",{className:"poster",src:"".concat("http://image.tmdb.org/t/p/w342").concat(f.poster_path),alt:f.title})),r.a.createElement("div",{className:"detailed-movie"},r.a.createElement("h3",null,"Release Date:"),r.a.createElement("p",null,f.release_date?j(f.release_date):"N/A"),r.a.createElement("h3",null,"Director:"),r.a.createElement("p",null,B),r.a.createElement("h3",null,"Summary:"),r.a.createElement("p",null,f.overview),r.a.createElement("h3",null,"Vote Average:"),r.a.createElement("p",null,f.vote_average,"/10 with ",f.vote_count," votes"),r.a.createElement("h3",null,"Genres:"),r.a.createElement("p",null,f.genres&&f.genres.length>0?f.genres.map((function(e){return e.name})).join(", "):"No genres available"),ce.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Watch on:"),r.a.createElement("div",{className:"gap streaming-providers"},ce.map((function(e,t){return r.a.createElement("div",{className:"stream-contain",key:t},r.a.createElement("a",{className:"movie-card stream-card",href:"https://www.".concat(e.provider_name.toLowerCase().replace(" ",""),".com"),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/original".concat(e.logo_path),alt:e.provider_name,className:"provider-logo"}),e.provider_name))})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Watch on:"),r.a.createElement("p",null,"Not currently streaming.")),I&&r.a.createElement("button",{onClick:function(){return X(!0)},className:"button trailer-button"},"Watch Trailer"))),A.length>0&&r.a.createElement("div",{className:"cast-section similar-movies"},r.a.createElement("h2",{className:"text-center"},"Cast:"),r.a.createElement("div",{className:"image-grid gap flex flex-wrap justify-content-center"},A.map((function(e,t){return r.a.createElement("div",{key:t,className:"cast-member"},r.a.createElement("div",{className:"cast-contain"},r.a.createElement("img",{src:"".concat("http://image.tmdb.org/t/p/w185").concat(e.profile_path),alt:e.name,className:"cast-image"})),r.a.createElement("p",{className:"cast-name"},e.name),r.a.createElement("p",{className:"cast-character"},e.character))})))),b.length>0&&r.a.createElement("div",{className:"similar-movies"},r.a.createElement("h2",{className:"text-center"},"Images from ",f.title,":"),r.a.createElement("div",{className:"image-grid gap flex flex-wrap justify-content-center"},b.map((function(e,t){return r.a.createElement("img",{key:t,src:"".concat("http://image.tmdb.org/t/p/w200").concat(e.file_path),alt:"Backdrop ".concat(t+1),onClick:function(){return function(e,t,a){t(e),a(!0)}(t,K,ae)}})})))),te&&null!==H&&r.a.createElement("div",{className:"image-modal",onClick:function(){ae(!1)}},r.a.createElement("button",{className:"prev-button",onClick:function(e){return function(e,t,a){a((function(e){return e>0?e-1:t.length-1}))}(0,b,K)}},"<"),r.a.createElement("img",{src:"".concat("http://image.tmdb.org/t/p/w200").concat(b[H].file_path),alt:"Backdrop ".concat(H+1),onClick:function(e){return e.stopPropagation()}}),r.a.createElement("button",{className:"next-button",onClick:function(e){return function(e,t,a){a((function(e){return e<t.length-1?e+1:0}))}(0,b,K)}},">")),P.length>0&&r.a.createElement("div",{className:"similar-movies"},r.a.createElement("h2",{className:"text-center"},"Similar Movies:"),r.a.createElement("div",{className:"justify-content-center flex flex-wrap"},P.map((function(e){return r.a.createElement("div",{key:e.id,className:"single-card"},r.a.createElement(s.b,{to:"/".concat(e.id),style:{textDecoration:"none",color:"inherit"}},r.a.createElement("div",{className:"movie-card"},r.a.createElement("div",{className:"movie-details"},r.a.createElement("img",{className:"card-img",src:"".concat("http://image.tmdb.org/t/p/w1280").concat(e.backdrop_path),alt:e.title}),r.a.createElement("h2",{className:"title"},e.title),r.a.createElement("p",{className:"description"},e.overview.length>100?e.overview.substring(0,100)+"...":e.overview),r.a.createElement("p",{className:"read-more"},"Read More")))))})))),Q&&I&&r.a.createElement("div",{className:"trailer-modal"},r.a.createElement("div",{className:"trailer-container"},r.a.createElement("button",{onClick:function(){return X(!1)},className:"trailer-close"},"\xd7"),r.a.createElement("iframe",{title:"movie-trailer",width:"100%",height:"400px",src:"https://www.youtube.com/embed/".concat(I),frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))),r.a.createElement("div",{className:"back-parent flex justify-content-center"},r.a.createElement(s.b,{to:"/",className:"button"},"Back to Movies"))))},T=function(e){var t=e.favorites,a=e.onToggleFavorite;return r.a.createElement("div",{className:"favorites-page"},r.a.createElement("h1",{className:"text-center"},"Your Fave(s)"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flex flex-wrap"},t.length>0?t.map((function(e){return r.a.createElement(g,{key:e.id,movie:e,onToggleFavorite:a,isFavorite:!0})})):r.a.createElement("div",{className:"full-width"},r.a.createElement("p",{className:"text-center"},"No favorites added yet."))),r.a.createElement("div",{className:"back-parent flex justify-content-center"},r.a.createElement(s.b,{to:"/",className:"button"},"Back to Home"))))},M=new u.a,U=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),f=u[0],v=u[1],d=function(e){c((function(t){var a=t.some((function(t){return t.id===e.id}))?t.filter((function(t){return t.id!==e.id})):[].concat(Object(l.a)(t),[e]);return console.log("Updated favorites in App:",a),a}))},g=function(e){var t=a.some((function(t){return t.id===e.id}));return console.log("Is movie favorite in App:",t),t};return Object(n.useEffect)((function(){var e=function(){window.scrollY>36?v("scroll"):v("")};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[]),r.a.createElement(p.a,{client:M}," ",r.a.createElement(s.a,{basename:"/"},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"search-header ".concat(f)},r.a.createElement(s.b,{to:"/"},r.a.createElement("div",{className:"logo"},r.a.createElement("div",null,r.a.createElement("h1",null,"Searchflix"),r.a.createElement("p",null,"A Movie search engine created by @FrontEndMike")))),r.a.createElement(s.b,{to:"/favorites"},r.a.createElement("div",{className:"flex favorites-icon"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"favorite-heart ".concat(a.length>0?"active":""),width:"30px",height:"30px"},r.a.createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",fill:a.length>0?"red":"transparent",stroke:a.length>0?"red":"white",strokeWidth:"1"}))))),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(b,{favorites:a,onToggleFavorite:d,isFavorite:g})}}),r.a.createElement(m.a,{path:"/favorites",render:function(){return r.a.createElement(T,{favorites:a,onToggleFavorite:d})}}),r.a.createElement(m.a,{path:"/:id",component:I})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.7eea5109.chunk.js.map